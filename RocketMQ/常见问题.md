# 怎么保证顺序消费
![](https://raw.githubusercontent.com/409582940/notes/main/images/20220324144814.png)
rocketmq提供了基于队列的顺序消费，完成顺序消费的主要是三把锁来实现的
1、消费端在启动时首先会进行队列的负载机制，保证一个消费者可以分配给多个队列，一个队列只能由一个消费者的原则
2、根据消费者分配的队列，向Broker申请锁，如果申请到锁就进行消费，如果申请不到就等下一个队列的负载周期
3、消费的时候会在消费端的线程池进行消费，但是会对消费队列进行加锁，保证用一个消费队列的多条消息会串行消费
4、在消费的过程中会对处理队列进行加锁，保证处理中的消息消费完成，发生队列负载后其他的消费者才能继续消费
# 怎么保证不重复消费
# 如何保证消息的可靠性传输
# 如何保持高可用